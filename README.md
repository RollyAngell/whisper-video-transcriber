# 🎬 Video Transcriber with Whisper + ChatGPT

Complete application suite to transcribe videos to text using OpenAI's Whisper locally, with **intelligent summaries generated by ChatGPT** and **automatic Google Drive upload**.

**✅ CROSS-PLATFORM** - Works on Windows, macOS and Linux.

## 🚀 Key Features

- **High quality transcription** with OpenAI's Whisper
- **Bilingual intelligent summaries** with ChatGPT (Spanish + English translations, default: GPT-4o)
- **Multi-language support** (English, Spanish and others)
- **Optional timestamps** in transcriptions
- **Multiple Whisper models** (tiny, base, medium, large)
- **Real-time progress** with detailed progress bars
- **🆕 Batch processing** with automatic language detection
- **🆕 Google Drive integration** for automatic cloud storage
- **🆕 Visual progress indicators** with percentage completion
- **🆕 Automatic transcription replacement** for updated content

## 📦 Application Components

This suite consists of three main scripts:

### 1. 🎤 `transcriptor_whisper.py` - Individual Video Transcription
**Main transcription engine for processing single videos**

- **Purpose**: Transcribe individual videos with high quality
- **Features**: Language optimization, ChatGPT summaries, timestamps
- **Best for**: Single videos, testing, specific processing needs

### 2. 🔄 `transcriptor_batch.py` - Batch Processing
**Automated bulk processing for large video collections**

- **Purpose**: Process multiple videos automatically
- **Features**: Progress tracking, auto-organization, language detection
- **Best for**: Large video collections, automated workflows

### 3. 🌐 `google_drive_uploader.py` - Google Drive Integration
**Upload transcribed videos and results to Google Drive**

- **Purpose**: Cloud storage and backup of transcriptions
- **Features**: Authentication, folder structure, skip existing files
- **Best for**: Cloud backup, team sharing, remote access

## 🔧 Installation

### 1. Install FFmpeg

**Windows:**
```bash
# Download from: https://www.gyan.dev/ffmpeg/builds/
# Extract to C:\ffmpeg\ and add C:\ffmpeg\bin to PATH
```

**macOS:**
```bash
brew install ffmpeg
```

**Linux:**
```bash
sudo apt update && sudo apt install ffmpeg
```

### 2. Create Virtual Environment

**macOS/Linux:**
```bash
# Create virtual environment
python3 -m venv whisper_env

# Activate virtual environment
source whisper_env/bin/activate

# Upgrade pip
pip install --upgrade pip
```

**Windows:**
```bash
# Create virtual environment
python -m venv whisper_env

# Activate virtual environment
whisper_env\Scripts\activate

# Upgrade pip
pip install --upgrade pip
```

### 3. Install Python dependencies

```bash
pip install -r requirements.txt
```

### 4. Configure OpenAI API Key

```bash
# Linux/Mac
export OPENAI_API_KEY=sk-your-api-key

# Windows PowerShell
$env:OPENAI_API_KEY="sk-your-api-key"
```

Get your API key at: https://platform.openai.com/api-keys

## 🚀 Usage

### 1. Individual Video Processing (`transcriptor_whisper.py`)

```bash
# Basic transcription
python transcriptor_whisper.py video.mp4 -l en-us

# With timestamps and high quality model
python transcriptor_whisper.py video.mp4 -l en-us -t -m large

# With specific ChatGPT model
python transcriptor_whisper.py video.mp4 -l es-cl --openai-model gpt-4

# Without summary (transcription only)
python transcriptor_whisper.py video.mp4 -l en-us --no-summary

# Custom output directory
python transcriptor_whisper.py video.mp4 -l en-us -o /path/to/output
```

**Individual Processing Features:**
- 🎯 **Language-specific optimization** for dialects and accents
- 📝 **ChatGPT-powered summaries** with bilingual translation
- ⏱️ **Optional timestamps** for precise time references
- 🔄 **Model selection** from tiny to large (quality vs speed)
- 📊 **Processing statistics** with speed metrics

### 2. Batch Processing (`transcriptor_batch.py`)

```bash
# Process all videos in both Spanish and English folders
python transcriptor_batch.py

# Process and upload to Google Drive automatically
python transcriptor_batch.py --upload-to-drive

# Process specific language only
python transcriptor_batch.py --spanish-only
python transcriptor_batch.py --english-only

# Custom path with Google Drive upload
python transcriptor_batch.py --base-path /path/to/videos --upload-to-drive

# Reset progress and reprocess all videos
python transcriptor_batch.py --reset-progress

# Detailed logging for debugging
python transcriptor_batch.py -v
```

**Batch Processing Features:**
- 🔍 **Automatic language detection** based on folder structure
- 📊 **Visual progress bars** with percentage completion
- 🔄 **Automatic video organization** into individual folders
- 💾 **Progress tracking** - resume interrupted processing
- 🌐 **Integrated Google Drive upload** with `--upload-to-drive`
- 📋 **Detailed logging** in `transcriptor_batch.log`
- 🎯 **Smart folder mapping**:
  - `Videos/Spanish/` → Chilean Spanish (`es-cl`)
  - `Videos/English/` → American English (`en-us`)

**Folder Structure Created:**

### Whisper Model Options

```bash
# Fast (tiny)
python transcriptor_whisper.py video.mp4 -m tiny

# Balanced (base)
python transcriptor_whisper.py video.mp4 -m base

# High quality (medium - default)
python transcriptor_whisper.py video.mp4 -m medium

# Best quality (large)
python transcriptor_whisper.py video.mp4 -m large
```

### GPT Models for Summaries

```bash
# GPT-4o (default, optimized and fast)
python transcriptor_whisper.py video.mp4

# GPT-3.5-turbo (economical)
python transcriptor_whisper.py video.mp4 --openai-model gpt-3.5-turbo

# GPT-4 (highest quality)
python transcriptor_whisper.py video.mp4 --openai-model gpt-4
```

## 🌍 Supported Languages

### Spanish Variants
- `es` - General Spanish (international)
- `es-cl` - Chilean Spanish (chilenismos, modismos)
- `es-ar` - Argentinian Spanish (rioplatense)
- `es-mx` - Mexican Spanish (mexicanismos)
- `es-co` - Colombian Spanish (colombianismos)
- `es-pe` - Peruvian Spanish (peruanismos)
- `es-es` - Spain Spanish (peninsular)

### English Variants
- `en` - General English (international)
- `en-us` - American English (US slang, spelling)
- `en-uk` - British English (UK expressions, spelling)
- `en-au` - Australian English (aussie slang)
- `en-ca` - Canadian English (canadian terms)
- `en-nz` - New Zealand English (kiwi expressions)
- `en-za` - South African English (saffa terms)
- `en-in` - Indian English (indian expressions)

### Usage Examples by Language

```bash
# Spanish variants
python transcriptor_whisper.py video.mp4 -l es     # General Spanish
python transcriptor_whisper.py video.mp4 -l es-cl  # Chilean Spanish
python transcriptor_whisper.py video.mp4 -l es-ar  # Argentinian Spanish
python transcriptor_whisper.py video.mp4 -l es-mx  # Mexican Spanish
python transcriptor_whisper.py video.mp4 -l es-co  # Colombian Spanish
python transcriptor_whisper.py video.mp4 -l es-pe  # Peruvian Spanish
python transcriptor_whisper.py video.mp4 -l es-es  # Spain Spanish

# English variants
python transcriptor_whisper.py video.mp4 -l en     # General English
python transcriptor_whisper.py video.mp4 -l en-us  # American English
python transcriptor_whisper.py video.mp4 -l en-uk  # British English
python transcriptor_whisper.py video.mp4 -l en-au  # Australian English
python transcriptor_whisper.py video.mp4 -l en-ca  # Canadian English
python transcriptor_whisper.py video.mp4 -l en-nz  # New Zealand English
python transcriptor_whisper.py video.mp4 -l en-za  # South African English
python transcriptor_whisper.py video.mp4 -l en-in  # Indian English
```

### When to Use Each Language Variant

**🇪🇸 Spanish Variants:**
- `es-cl` - Chilean content with local expressions (po, cachai, fome)
- `es-ar` - Argentinian content with rioplatense accent (che, boludo)  
- `es-mx` - Mexican content with mexicanisms (órale, chido)
- `es-co` - Colombian content with colombianisms (parcero, chimba)
- `es-pe` - Peruvian content with local expressions (pata, chevere)
- `es-es` - Spain content with peninsular expressions (tío, vale)
- `es` - Mixed Spanish or when unsure about specific variant

**🇬🇧 English Variants:**
- `en-us` - American content with US slang (awesome, dude, gonna)
- `en-uk` - British content with UK expressions (brilliant, mate, innit)
- `en-au` - Australian content with aussie slang (mate, fair dinkum)
- `en-ca` - Canadian content with canadian terms (eh, toque, loonie)
- `en-nz` - New Zealand content with kiwi expressions (sweet as, chur)
- `en-za` - South African content with local terms (lekker, braai)
- `en-in` - Indian content with indian expressions (prepone, good name)
- `en` - Mixed English accents or when unsure about specific variant

## 📊 Model Comparison Guide

### 🎤 Whisper Models (Transcription)

| Model | Size | Speed | Quality | Best For |
|-------|------|-------|---------|----------|
| tiny | 39 MB | 15x faster | ⭐⭐⭐ | Quick tests, clear audio |
| base | 74 MB | 8x faster | ⭐⭐⭐⭐ | General use, good balance |
| medium | 769 MB | 2.5x faster | ⭐⭐⭐⭐⭐ | **Professional (default)** |
| large | 1550 MB | 1.5x faster | ⭐⭐⭐⭐⭐ | Critical content, complex audio |

### 🤖 ChatGPT Models (Summaries)

| Model | Speed | Cost | Quality | Best For |
|-------|--------|------|---------|----------|
| gpt-3.5-turbo | Very fast | ~$0.001 | ⭐⭐⭐⭐ | High volume, economical |
| gpt-4o | Fast | ~$0.010 | ⭐⭐⭐⭐⭐ | **Balanced (default)** |
| gpt-4 | Slow | ~$0.050 | ⭐⭐⭐⭐⭐ | Maximum quality, complex content |

### 🎯 Recommended Combinations

```bash
# Quick testing (fastest)
python transcriptor_whisper.py video.mp4 -m tiny --openai-model gpt-3.5-turbo

# General use (default - best balance)
python transcriptor_whisper.py video.mp4

# Professional quality
python transcriptor_whisper.py video.mp4 -m large --openai-model gpt-4

# High volume processing
python transcriptor_whisper.py video.mp4 -m base --openai-model gpt-3.5-turbo
```

Each file contains:
- **Video metadata** (duration, size, format)
- **Processing statistics** (time, speed, model used)
- **Bilingual ChatGPT summary** (topics, key points in both Spanish and English, statistics in English)
- **Complete transcription** (with optional timestamps)

## 🆕 Recent Updates & Improvements

### 🔥 Latest Features (v2.0)

#### 🎯 **Batch Processing System**
- **New script**: `transcriptor_batch.py` for automated mass processing
- **Automatic language detection**: Based on folder structure (`Spanish/` → `es-cl`, `English/` → `en-us`)
- **Visual progress indicators**: Real-time progress bars with percentage completion
- **Smart file management**: Automatic replacement of existing transcriptions
- **Resume capability**: Interrupted processing can be resumed from where it left off
- **Comprehensive logging**: Detailed logs in `transcriptor_batch.log`

#### 📊 **Enhanced Progress Tracking**

## 🔧 Maintenance Commands

```bash
# Download all models
python transcriptor_whisper.py --download-models

# Check model status
python transcriptor_whisper.py --check-models

# Help
python transcriptor_whisper.py --help
```

## 📝 Supported Formats

MP4, AVI, MOV, MKV, WMV, FLV, WebM

## 🆘 Troubleshooting

### Common Errors

1. **"ffmpeg not found"**
   - Install ffmpeg following the installation instructions

2. **"Invalid API key"**
   - Get a new API key at https://platform.openai.com/api-keys
   - Configure it: `export OPENAI_API_KEY=sk-your-key`

3. **"Quota exceeded"**
   - Check your billing at https://platform.openai.com/account/billing
   - Add credits to your account

4. **"Model not found"**
   - Download models: `python transcriptor_whisper.py --download-models`

## 🎉 Ready to Start!

1. **Install ffmpeg** (see installation section)
2. **Create virtual environment**: `python3 -m venv whisper_env` (Mac/Linux) or `python -m venv whisper_env` (Windows)
3. **Activate environment**: `source whisper_env/bin/activate` (Mac/Linux) or `whisper_env\Scripts\activate` (Windows)
4. **Get OpenAI API key** (https://platform.openai.com/api-keys)
5. **Install dependencies**: `pip install -r requirements.txt`
6. **Configure API key**: `export OPENAI_API_KEY=sk-your-key`
7. **Run**: `python transcriptor_whisper.py your-video.mp4`